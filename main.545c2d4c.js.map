{"version":3,"sources":["scripts/main.js"],"names":["tbody","document","querySelector","rows","children","cells","querySelectorAll","headers","table","headerClicked","previouslyActiveRow","updateRows","updateCells","pushNotification","type","title","description","notification","createElement","className","classList","add","dataset","qa","innerHTML","body","append","setTimeout","removeChild","saveCell","cell","input","initialValue","selectedCell","value","length","cellIndex","innerText","isNaN","Math","ceil","toLocaleString","parentElement","configureCells","forEach","addEventListener","e","target","trim","select","office","cloneNode","focus","key","tagName","index","indexOf","ascending","sort","row1","row2","firstColumn","secondColumn","localeCompare","undefined","numeric","sensitivity","row","closest","remove","insertAdjacentHTML","nameInput","positionInput","age","salary","button","form","preventDefault","newRow","officeValue","formattedSalary","appendChild","reset"],"mappings":"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","file":"main.545c2d4c.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\r\n\r\nconst tbody = document.querySelector('tbody');\r\nlet rows = [...document.querySelector('tbody').children];\r\nlet cells = [...document.querySelectorAll('td')];\r\nconst headers = [...document.querySelector('tr').children];\r\nconst table = document.querySelector('table');\r\n\r\nlet headerClicked = false;\r\nlet previouslyActiveRow = null;\r\n\r\nconst updateRows = () => [...document.querySelector('tbody').children];\r\n\r\nconst updateCells = () => [...document.querySelectorAll('td')];\r\n\r\nconst pushNotification = (type, title, description) => {\r\n  const notification = document.createElement('div');\r\n\r\n  notification.className = 'notification';\r\n  notification.classList.add(type);\r\n  notification.dataset.qa = 'notification';\r\n\r\n  notification.innerHTML = `\r\n    <h2>${title}</h2>\r\n    <p>${description}</p>\r\n  `;\r\n\r\n  document.body.append(notification);\r\n\r\n  setTimeout(() => {\r\n    document.body.removeChild(document.querySelector('.notification'));\r\n  }, 2000);\r\n};\r\n\r\nconst saveCell = cell => {\r\n  const input = cell.querySelector('input');\r\n  const initialValue = selectedCell.dataset.initialValue;\r\n\r\n  if (!input.value.length) {\r\n    cell.innerText = initialValue;\r\n  } else {\r\n    switch (cell.cellIndex) {\r\n      // Name configuration\r\n      case 0:\r\n        if (input.value.length < 4) {\r\n          pushNotification(\r\n            'error',\r\n            'Error',\r\n            'Name should have at least 4 letters'\r\n          );\r\n\r\n          cell.innerText = initialValue;\r\n        } else {\r\n          cell.innerText = input.value;\r\n        }\r\n\r\n        break;\r\n        // Age configuration\r\n      case 3:\r\n        if (input.value < 18 || input.value > 90) {\r\n          pushNotification(\r\n            'error',\r\n            'Error',\r\n            'Age should be between 18 and 90'\r\n          );\r\n\r\n          cell.innerText = initialValue;\r\n        } else if (isNaN(input.value)) {\r\n          pushNotification(\r\n            'error',\r\n            'Error',\r\n            'Age cannot be string'\r\n          );\r\n\r\n          cell.innerText = initialValue;\r\n        } else {\r\n          cell.innerText = input.value;\r\n        }\r\n\r\n        break;\r\n        // Salary configuration\r\n      case 4:\r\n        if (isNaN(input.value)) {\r\n          pushNotification(\r\n            'error',\r\n            'Error',\r\n            'Salary cannot be string'\r\n          );\r\n\r\n          cell.innerText = initialValue;\r\n        } else if (input.value < 0) {\r\n          pushNotification(\r\n            'error',\r\n            'Error',\r\n            'Salary cannot be lower than 0'\r\n          );\r\n\r\n          cell.innerText = initialValue;\r\n        } else {\r\n          cell.innerText\r\n                = '$' + Math.ceil(input.value).toLocaleString('en-US');\r\n        }\r\n\r\n        break;\r\n\r\n      default: cell.innerText = input.value;\r\n    }\r\n  }\r\n\r\n  if (input.parentElement === cell) {\r\n    cell.removeChild(input);\r\n  }\r\n\r\n  cell = null;\r\n};\r\n\r\nconst configureCells = () => {\r\n  cells.forEach(cell => {\r\n    cell.addEventListener('dblclick', e => {\r\n      selectedCell = e.target;\r\n      selectedCell.dataset.initialValue = selectedCell.innerText.trim();\r\n      selectedCell.innerText = '';\r\n\r\n      const input = document.createElement('input');\r\n\r\n      input.className = 'cell-input';\r\n\r\n      const select = office.cloneNode(true);\r\n\r\n      if (cell.cellIndex === 2) {\r\n        selectedCell.append(select);\r\n\r\n        select.addEventListener('change', () => {\r\n          input.value = select.value;\r\n\r\n          selectedCell.removeChild(select);\r\n          selectedCell.append(input);\r\n\r\n          saveCell(selectedCell);\r\n        });\r\n      } else {\r\n        selectedCell.append(input);\r\n      }\r\n\r\n      input.focus();\r\n      input.addEventListener('blur', () => saveCell(selectedCell));\r\n\r\n      input.addEventListener('keypress', e => {\r\n        if (e.key === 'Enter') {\r\n          saveCell(selectedCell);\r\n        }\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\ntable.addEventListener('click', e => {\r\n  if (e.target.parentElement.parentElement.tagName === 'TFOOT') {\r\n    return;\r\n  }\r\n\r\n  if (e.target.tagName === 'TH') {\r\n    const index = headers.indexOf(e.target);\r\n\r\n    const sort = (rows, ascending = true) => {\r\n      rows.sort((row1, row2) => {\r\n        const firstColumn = row1.children[index].innerText;\r\n        const secondColumn = row2.children[index].innerText;\r\n\r\n        if (ascending) {\r\n          return firstColumn.localeCompare(secondColumn, undefined, {\r\n            numeric: true, sensitivity: 'base',\r\n          });\r\n        } else {\r\n          return secondColumn.localeCompare(firstColumn, undefined, {\r\n            numeric: true, sensitivity: 'base',\r\n          });\r\n        }\r\n      });\r\n\r\n      rows.forEach(row => tbody.append(row));\r\n    };\r\n\r\n    sort(rows, !headerClicked);\r\n    headerClicked = !headerClicked;\r\n  }\r\n\r\n  if (e.target.tagName === 'TD') {\r\n    const row = e.target.closest('TR');\r\n\r\n    if (previouslyActiveRow) {\r\n      previouslyActiveRow.classList.remove('active');\r\n    }\r\n\r\n    row.classList.add('active');\r\n    previouslyActiveRow = row;\r\n  }\r\n});\r\n\r\ndocument.body.insertAdjacentHTML('beforeend', `\r\n  <form class=\"new-employee-form\">\r\n    <label>\r\n      Name: <input name=\"name\" type=\"text\" data-qa=\"name\" required>\r\n    </label>\r\n    <label>\r\n       Position: \r\n         <input name=\"position\" type=\"text\" data-qa=\"position\" required>\r\n     </label>\r\n    <label>\r\n      Office:\r\n      <select data-qa=\"office\" required>\r\n        <option value=\"Tokyo\">Tokyo</option>\r\n        <option value=\"Singapore\">Singapore</option>\r\n        <option value=\"London\">London</option>\r\n        <option value=\"New York\">New York</option>\r\n        <option value=\"Edinburgh\">Edinburgh</option>\r\n        <option value=\"San Francisco\">San Francisco</option>\r\n      </select>\r\n    </label>\r\n    <label>\r\n      Age: <input name=\"age\" type=\"number\" data-qa=\"age\" required>\r\n    </label>\r\n    <label>\r\n      Salary: \r\n        <input name=\"salary\" type=\"number\" data-qa=\"salary\" required>\r\n    </label>\r\n    <button>Save to table</button>\r\n  </form>`\r\n);\r\n\r\nconst nameInput = document.querySelector('[data-qa=\"name\"]');\r\nconst positionInput = document.querySelector('[data-qa=\"position\"]');\r\nconst office = document.querySelector('[data-qa=\"office\"]');\r\nconst age = document.querySelector('[data-qa=\"age\"]');\r\nconst salary = document.querySelector('[data-qa=\"salary\"]');\r\nconst button = document.querySelector('button');\r\n\r\nconst form = document.querySelector('.new-employee-form');\r\n\r\nbutton.addEventListener('click', e => {\r\n  e.preventDefault();\r\n\r\n  if (!positionInput.value.trim()\r\n    || !age.value.trim()\r\n    || !salary.value.trim()) {\r\n    pushNotification(\r\n      'error',\r\n      'Error',\r\n      'All fields should be filled'\r\n    );\r\n\r\n    return;\r\n  }\r\n\r\n  if (nameInput.value.length < 4) {\r\n    pushNotification(\r\n      'error',\r\n      'Error',\r\n      'Name should have at least 4 letters'\r\n    );\r\n\r\n    return;\r\n  }\r\n\r\n  if (age.value < 18 || age.value > 90) {\r\n    pushNotification(\r\n      'error',\r\n      'Error',\r\n      'Age should be between 18 and 90'\r\n    );\r\n\r\n    return;\r\n  }\r\n\r\n  pushNotification(\r\n    'success',\r\n    'Success',\r\n    'New employee was successfully added'\r\n  );\r\n\r\n  const newRow = document.createElement('tr');\r\n  const officeValue = office.value;\r\n  const formattedSalary = Math.ceil(salary.value).toLocaleString('en-US');\r\n\r\n  newRow.innerHTML\r\n  = `\r\n  <td>${nameInput.value}</td>\r\n  <td>${positionInput.value}</td>\r\n  <td>${officeValue}</td>\r\n  <td>${age.value}</td>\r\n  <td>$${(formattedSalary)}</td>`;\r\n\r\n  tbody.appendChild(newRow);\r\n  rows = updateRows();\r\n  cells = updateCells();\r\n  configureCells();\r\n  form.reset();\r\n});\r\n\r\nlet selectedCell = null;\r\n\r\nconfigureCells();\n"]}